<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Payroll Report Form</title>
  <!-- Bootstrap CDN for styling -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <!-- jQuery CDN -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <!-- Bootstrap JavaScript and Popper.js -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
<style>
  body {
    background-color: #f8f9fa;
  }
  .hero-section {
    background-color: #343a40;
    color: white;
    padding: 50px;
    text-align: center;
  }
  .container {
    margin-top: 40px;
  }
  .card {
    margin-bottom: 20px;
  }
  .card-header {
    background-color: #007bff;
    color: white;
  }
</style>
</head>
<body>

<!-- Navigation Bar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href="#">Crystal's Resort HRMS</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav ml-auto">
      <li class="nav-item">
        <a class="nav-link" href="#">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="employee_information.html">Employee Information</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="employee_changes.html">Employee Change</a>
      </li>
      <li class="nav-item active">
        <a class="nav-link" href="payreport.html">Payroll Report</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="claim_form.html">Claim Form</a>
      </li>
    </ul>
  </div>
</nav>
<body>
  <div class="container mt-5">
    <h2 class="text-center mb-4">Payroll Report Form</h2>
    <form id="payrollForm">
      
      <!-- Report Month -->
      <div class="form-group">
        <label for="reportMonth">Report Month:</label>
        <input type="month" class="form-control" id="reportMonth" name="reportMonth" required>
      </div>
      
      <!-- Employee ID -->
      <div class="form-group">
        <label for="employeeID">Employee ID:</label>
        <input type="text" class="form-control" id="employeeID" name="employeeID" required>
      </div>
      
      <!-- Gross Pay -->
      <div class="form-group">
        <label for="grossPay">Gross Pay (UGX):</label>
        <input type="number" class="form-control" id="grossPay" name="grossPay" required>
      </div>
      
      <!-- PAYE Deduction -->
      <div class="form-group">
        <label for="payeDeduction">PAYE Deduction (UGX):</label>
        <input type="text" class="form-control" id="payeDeduction" name="payeDeduction" readonly>
      </div>

      <!-- NSSF Deduction -->
      <div class="form-group">
        <label for="nssfDeduction">NSSF Deduction (UGX):</label>
        <input type="text" class="form-control" id="nssfDeduction" name="nssfDeduction" readonly>
      </div>

      <!-- Total Deductions -->
      <div class="form-group">
        <label for="totalDeductions">Total Deductions (UGX):</label>
        <input type="text" class="form-control" id="totalDeductions" name="totalDeductions" readonly>
      </div>

      <!-- Net Pay -->
      <div class="form-group">
        <label for="netPay">Net Pay (UGX):</label>
        <input type="text" class="form-control" id="netPay" name="netPay" readonly>
      </div>

      <!-- Prepared By -->
      <div class="form-group">
        <label for="preparedBy">Prepared By:</label>
        <input type="text" class="form-control" id="preparedBy" name="preparedBy" required>
      </div>

      <!-- Approved By -->
      <div class="form-group">
        <label for="approvedBy">Approved By:</label>
        <input type="text" class="form-control" id="approvedBy" name="approvedBy" required>
      </div>

      <button type="button" class="btn btn-primary" onclick="calculatePayroll()">Calculate Payroll</button>
    </form>
    
    <!-- Results Section -->
    <div id="result" class="mt-4">
      <!-- Calculation results will be displayed here -->
    </div>
  </div>

  <script>
    function calculatePayroll() {
      const grossPay = parseFloat($("#grossPay").val());

      // PAYE Calculation
      let paye;
      if (grossPay <= 235000) {
          paye = 0;
      } else if (grossPay <= 335000) {
          paye = (grossPay - 235000) * 0.10;
      } else if (grossPay <= 410000) {
          paye = (grossPay - 335000) * 0.20 + 10000;
      } else if (grossPay <= 10000000) {
          paye = (grossPay - 410000) * 0.30 + 25000;
      } else {
          paye = ((grossPay - 410000) * 0.30 + 25000) + ((grossPay - 10000000) * 0.10);
      }

      // NSSF Calculation
      const employeeNSSF = grossPay * 0.05;
      const employerNSSF = grossPay * 0.10;
      const nssf = employeeNSSF + employerNSSF;

      // Total Deductions
      const totalDeductions = paye + nssf;

      // Net Pay
      const netPay = grossPay - totalDeductions;

      //Approved By
      const approvedBy = $("#approvedBy").val();
      const preparedBy = $("#preparedBy").val();

      // Display Results
      $("#payeDeduction").val(paye.toFixed(2));
      $("#nssfDeduction").val(nssf.toFixed(2));
      $("#totalDeductions").val(totalDeductions.toFixed(2));
      $("#netPay").val(netPay.toFixed(2));

      // Show Detailed Results
      $("#result").html(`
        <h4>Payroll Calculation Summary</h4>
        <p><strong>Gross Pay:</strong> UGX ${grossPay.toFixed(2)}</p>
        <p><strong>PAYE Deduction:</strong> UGX ${paye.toFixed(2)}</p>
        <p><strong>NSSF Deduction:</strong> UGX ${nssf.toFixed(2)} (Employee: UGX ${employeeNSSF.toFixed(2)}, Employer: UGX ${employerNSSF.toFixed(2)})</p>
        <p><strong>Total Deductions:</strong> UGX ${totalDeductions.toFixed(2)}</p>
        <p><strong>Net Pay:</strong> UGX ${netPay.toFixed(2)}</p>
        <p><strong>Approved By:</strong> ${approvedBy}</p>
        <p><strong>Prepared By:</strong> ${preparedBy}</p>
      `);
    }
  </script>
</body>
</html>
